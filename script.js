let balance = 1000; let user = null; let lastPlayTime = 0; const COOLDOWN = 5000; // 5초 쿨타임 let stocks = Array(10).fill().map((_, i) => ({ id: i + 1, name: `주식 ${i + 1}`, price: Math.floor(Math.random() * 100) + 50, owned: 0 })); // 회원가입 function register() { const username = document.getElementById('username').value; const password = document.getElementById('password').value; if (!username || !password) { document.getElementById('auth-message').textContent = '아이디와 비밀번호를 입력하세요.'; return; } const users = JSON.parse(localStorage.getItem('users') || '{}'); if (users[username]) { document.getElementById('auth-message').textContent = '이미 존재하는 아이디입니다.'; return; } users[username] = { password, balance: 1000, stocks: Array(10).fill(0) }; localStorage.setItem('users', JSON.stringify(users)); document.getElementById('auth-message').textContent = '회원가입 성공! 로그인하세요.'; } // 로그인 function login() { const username = document.getElementById('username').value; const password = document.getElementById('password').value; const users = JSON.parse(localStorage.getItem('users') || '{}'); if (users[username] && users[username].password === password) { user = username; balance = users[username].balance; stocks.forEach((stock, i) => stock.owned = users[username].stocks[i]); document.getElementById('balance').textContent = balance; document.getElementById('auth-section').style.display = 'none'; document.getElementById('game-section').style.display = 'block'; updateStocks(); } else { document.getElementById('auth-message').textContent = '아이디 또는 비밀번호가 잘못되었습니다.'; } } // 쿨타임 체크 function checkCooldown() { const now = Date.now(); if (now - lastPlayTime < COOLDOWN) { document.getElementById('cooldown-message').textContent = `쿨타임: ${Math.ceil((COOLDOWN - (now - lastPlayTime)) / 1000)}초 남음`; return false; } document.getElementById('cooldown-message').textContent = ''; lastPlayTime = now; return true; } // 잔고 업데이트 function updateBalance(amount) { balance += amount; document.getElementById('balance').textContent = balance; const users = JSON.parse(localStorage.getItem('users') || '{}'); users[user].balance = balance; users[user].stocks = stocks.map(s => s.owned); localStorage.setItem('users', JSON.stringify(users)); } // 크래쉬 게임 function playCrash() { if (!checkCooldown()) return; const bet = parseInt(document.getElementById('crash-bet').value); if (isNaN(bet) || bet <= 0 || bet > balance) { document.getElementById('crash-result').textContent = '유효한 베팅 금액을 입력하세요.'; return; } updateBalance(-bet); const multiplier = Math.random() * 10; if (Math.random() < 0.5) { const win = Math.floor(bet * multiplier); updateBalance(win); document.getElementById('crash-result').textContent = `성공! ${multiplier.toFixed(2)}배, ${win}원 획득`; } else { document.getElementById('crash-result').textContent = '실패! 크래쉬!'; } } //